<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ranran.uums.system.mapper.TsRoleMapper">
    <resultMap id="TsRoleMap" type="com.ranran.uums.system.model.TsRole">
        <!--
          WARNING - @mbggenerated
        -->
        <result column="ROLE_ID" jdbcType="BIGINT" property="roleId" />
        <result column="ROLE_NO" jdbcType="VARCHAR" property="roleNo" />
        <result column="ROLE_NAME" jdbcType="VARCHAR" property="roleName" />
        <result column="ROLE_STATUS" jdbcType="INTEGER" property="roleStatus" />
        <result column="ROLE_DESCRIBE" jdbcType="VARCHAR" property="roleDescribe" />
        <result column="CREATOR" jdbcType="VARCHAR" property="creator" />
        <result column="CREATE_TIME" jdbcType="DATE" property="createTime" />
        <result column="MODIFIER" jdbcType="VARCHAR" property="modifier" />
        <result column="MODIFY_TIME" jdbcType="DATE" property="modifyTime" />
        <result column="ORG_ID" jdbcType="VARCHAR" property="orgId" />
        <result column="REC_VER" jdbcType="INTEGER" property="recVer" />
    </resultMap>

    <resultMap id="tsUserMap" type="com.ranran.uums.system.model.TsUser">
        <!--
          WARNING - @mbg.generated
        -->
        <id column="user_id" jdbcType="BIGINT" property="userId" />
        <result column="USER_NO" jdbcType="VARCHAR" property="userNo" />
        <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
        <result column="USER_PASSWORD" jdbcType="VARCHAR" property="userPassword" />
        <result column="USER_SALT" jdbcType="VARCHAR" property="userSalt" />
        <result column="USER_STATUS" jdbcType="INTEGER" property="userStatus" />
        <result column="USER_Tel" jdbcType="VARCHAR" property="userTel" />
        <result column="USER_PHONE" jdbcType="VARCHAR" property="userPhone" />
        <result column="USER_DEPT_NO" jdbcType="VARCHAR" property="userDeptNo" />
        <result column="USER_DEPT_NAME" jdbcType="VARCHAR" property="userDeptName" />
        <result column="CREATOR" jdbcType="VARCHAR" property="creator" />
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime" />
        <result column="MODIFIER" jdbcType="VARCHAR" property="modifier" />
        <result column="MODIFY_TIME" jdbcType="TIMESTAMP" property="modifyTime" />
        <result column="ORG_ID" jdbcType="VARCHAR" property="orgId" />
        <result column="REC_VER" jdbcType="INTEGER" property="recVer" />
    </resultMap>

    <select id="selectRoleUser" resultMap="tsUserMap" parameterType="com.ranran.uums.system.model.TsRole">
        SELECT
        user_id,
        USER_NO,
        USER_NAME,
        USER_PASSWORD,
        USER_SALT,
        USER_STATUS,
        USER_Tel,
        USER_PHONE,
        USER_DEPT_NO,
        USER_DEPT_NAME,
        CREATOR,
        CREATE_TIME,
        MODIFIER,
        MODIFY_TIME,
        ORG_ID,
        REC_VER
        FROM
        ts_user tu
        WHERE
        tu.USER_NO IN (SELECT rur.UR_USER_NO FROM ra_user_role rur WHERE rur.UR_ROLE_NO = #{roleNo})
    </select>

</mapper>